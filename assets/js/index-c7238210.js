import{u as Z,T as ee,S as te,f as G,F as ne,c as se,e as re,h as oe,C as ce}from"./iconUtil-dd43f931.js";import{r as a,A as M,E as A,i as g,s as J,as as le,d as Q,_ as D}from"./index-791c0cb3.js";var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const ie=ae;var de=function(r,s){return a.createElement(M,A({},r,{ref:s,icon:ie}))};const fe=a.forwardRef(de);var ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};const pe=ue;var ye=function(r,s){return a.createElement(M,A({},r,{ref:s,icon:pe}))};const he=a.forwardRef(ye);var me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"};const xe=me;var ge=function(r,s){return a.createElement(M,A({},r,{ref:s,icon:xe}))};const ve=a.forwardRef(ge),V=4;function be(t){const{dropPosition:r,dropLevelOffset:s,prefixCls:n,indent:o,direction:e="ltr"}=t,l=e==="ltr"?"left":"right",c=e==="ltr"?"right":"left",d={[l]:-s*o+V,[c]:0};switch(r){case-1:d.top=-3;break;case 1:d.bottom=-3;break;default:d.bottom=-3,d[l]=o+V;break}return g.createElement("div",{style:d,className:`${n}-drop-indicator`})}const Oe=g.forwardRef((t,r)=>{const{getPrefixCls:s,direction:n,virtual:o,tree:e}=g.useContext(J),{prefixCls:l,className:c,showIcon:d=!1,showLine:f,switcherIcon:S,blockNode:b=!1,children:C,checkable:O=!1,selectable:E=!0,draggable:v,motion:K,style:j}=t,p=s("tree",l),H=s(),I=K!=null?K:Object.assign(Object.assign({},le(H)),{motionAppear:!1}),k=Object.assign(Object.assign({},t),{checkable:O,selectable:E,showIcon:d,motion:I,blockNode:b,showLine:!!f,dropIndicatorRender:be}),[w,F]=Z(p),h=g.useMemo(()=>{if(!v)return!1;let i={};switch(typeof v){case"function":i.nodeDraggable=v;break;case"object":i=Object.assign({},v);break}return i.icon!==!1&&(i.icon=i.icon||g.createElement(ve,null)),i},[v]),u=i=>g.createElement(te,{prefixCls:p,switcherIcon:S,treeNodeProps:i,showLine:f});return w(g.createElement(ee,Object.assign({itemHeight:20,ref:r,virtual:o},k,{style:Object.assign(Object.assign({},e==null?void 0:e.style),j),prefixCls:p,className:Q({[`${p}-icon-hide`]:!d,[`${p}-block-node`]:b,[`${p}-unselectable`]:!E,[`${p}-rtl`]:n==="rtl"},e==null?void 0:e.className,c,F),direction:n,checkable:O&&g.createElement("span",{className:`${p}-checkbox-inner`}),selectable:E,switcherIcon:u,draggable:h}),C))}),U=Oe;var x;(function(t){t[t.None=0]="None",t[t.Start=1]="Start",t[t.End=2]="End"})(x||(x={}));function L(t,r,s){const{key:n,children:o}=s;function e(l){const c=l[n],d=l[o];r(c,l)!==!1&&L(d||[],r,s)}t.forEach(e)}function Ee(t){let{treeData:r,expandedKeys:s,startKey:n,endKey:o,fieldNames:e}=t;const l=[];let c=x.None;if(n&&n===o)return[n];if(!n||!o)return[];function d(f){return f===n||f===o}return L(r,f=>{if(c===x.End)return!1;if(d(f)){if(l.push(f),c===x.None)c=x.Start;else if(c===x.Start)return c=x.End,!1}else c===x.Start&&l.push(f);return s.includes(f)},G(e)),l}function z(t,r,s){const n=D(r),o=[];return L(t,(e,l)=>{const c=n.indexOf(e);return c!==-1&&(o.push(l),n.splice(c,1)),!!n.length},G(s)),o}var B=globalThis&&globalThis.__rest||function(t,r){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(s[n[o]]=t[n[o]]);return s};function Ke(t){const{isLeaf:r,expanded:s}=t;return r?a.createElement(ne,null):s?a.createElement(fe,null):a.createElement(he,null)}function q(t){let{treeData:r,children:s}=t;return r||oe(s)}const we=(t,r)=>{var{defaultExpandAll:s,defaultExpandParent:n,defaultExpandedKeys:o}=t,e=B(t,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const l=a.useRef(),c=a.useRef(),d=()=>{const{keyEntities:h}=se(q(e));let u;return s?u=Object.keys(h):n?u=re(e.expandedKeys||o||[],h):u=e.expandedKeys||o,u},[f,S]=a.useState(e.selectedKeys||e.defaultSelectedKeys||[]),[b,C]=a.useState(()=>d());a.useEffect(()=>{"selectedKeys"in e&&S(e.selectedKeys)},[e.selectedKeys]),a.useEffect(()=>{"expandedKeys"in e&&C(e.expandedKeys)},[e.expandedKeys]);const O=(h,u)=>{var i;return"expandedKeys"in e||C(h),(i=e.onExpand)===null||i===void 0?void 0:i.call(e,h,u)},E=(h,u)=>{var i;const{multiple:R,fieldNames:N}=e,{node:W,nativeEvent:m}=u,{key:P=""}=W,T=q(e),$=Object.assign(Object.assign({},u),{selected:!0}),X=(m==null?void 0:m.ctrlKey)||(m==null?void 0:m.metaKey),Y=m==null?void 0:m.shiftKey;let y;R&&X?(y=h,l.current=P,c.current=y,$.selectedNodes=z(T,y,N)):R&&Y?(y=Array.from(new Set([].concat(D(c.current||[]),D(Ee({treeData:T,expandedKeys:b,startKey:P,endKey:l.current,fieldNames:N}))))),$.selectedNodes=z(T,y,N)):(y=[P],l.current=P,c.current=y,$.selectedNodes=z(T,y,N)),(i=e.onSelect)===null||i===void 0||i.call(e,y,$),"selectedKeys"in e||S(y)},{getPrefixCls:v,direction:K}=a.useContext(J),{prefixCls:j,className:p,showIcon:H=!0,expandAction:I="click"}=e,k=B(e,["prefixCls","className","showIcon","expandAction"]),w=v("tree",j),F=Q(`${w}-directory`,{[`${w}-directory-rtl`]:K==="rtl"},p);return a.createElement(U,Object.assign({icon:Ke,ref:r,blockNode:!0},k,{showIcon:H,expandAction:I,prefixCls:w,className:F,expandedKeys:b,selectedKeys:f,onSelect:E,onExpand:O}))},Se=a.forwardRef(we),Ce=Se,_=U;_.DirectoryTree=Ce;_.TreeNode=ce;const Te=_;export{Te as T};
