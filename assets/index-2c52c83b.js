var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,s=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&l(e,n,t[n]);if(a)for(var n of a(t))i.call(t,n)&&l(e,n,t[n]);return e},o=(e,a)=>t(e,n(a));import{p as c,r as d,w as p,u as m,f as x,e as b,B as u,aC as h,aD as y,aE as f,i as g,o as j,az as v,K as C,z as O,j as w,a as k,G as P,h as I,I as E}from"./index-b517c6ab.js";import{P as N,d as T}from"./websiteSetting-f859cf91.js";import{D as S,d as F}from"./index-f5ca2d82.js";import{T as $}from"./Table-a6f80295.js";import{g as z,a as D,P as V}from"./index-4dc68a3a.js";import{S as Y}from"./index-d0e92f0e.js";import{S as B}from"./index-2138af34.js";import{R as W}from"./index-ab65501f.js";import{I as _}from"./index-e37f99af.js";import"./List-6ef7a28d.js";import"./iconUtil-9fcbdc3f.js";import"./objectDestructuringEmpty-47c1eead.js";import"./useForceUpdate-2418c678.js";import"./index-ab32d06a.js";import"./CheckOutlined-bd66e088.js";const M=c("Popconfirm",(e=>(e=>{const{componentCls:t,iconCls:n,antCls:a,zIndexPopup:r,colorText:i,colorWarning:l,marginXXS:s,marginXS:o,fontSize:c,fontWeightStrong:d,colorTextHeading:p}=e;return{[t]:{zIndex:r,[`&${a}-popover`]:{fontSize:c},[`${t}-message`]:{marginBottom:o,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${n}`]:{color:l,fontSize:c,lineHeight:1,marginInlineEnd:o},[`${t}-title`]:{fontWeight:d,color:p,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:s,color:i}},[`${t}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:o}}}}})(e)),(e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}}),{resetStyle:!1});var G=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const K=e=>{const{prefixCls:t,okButtonProps:n,cancelButtonProps:a,title:r,description:i,cancelText:l,okText:s,okType:o="primary",icon:c=d.createElement(f,null),showCancel:g=!0,close:j,onConfirm:v,onCancel:C,onPopupClick:O}=e,{getPrefixCls:w}=d.useContext(p),[k]=m("Popconfirm",x.Popconfirm),P=z(r),I=z(i);return d.createElement("div",{className:`${t}-inner-content`,onClick:O},d.createElement("div",{className:`${t}-message`},c&&d.createElement("span",{className:`${t}-message-icon`},c),d.createElement("div",{className:`${t}-message-text`},P&&d.createElement("div",{className:b(`${t}-title`)},P),I&&d.createElement("div",{className:`${t}-description`},I))),d.createElement("div",{className:`${t}-buttons`},g&&d.createElement(u,Object.assign({onClick:C,size:"small"},a),null!=l?l:null==k?void 0:k.cancelText),d.createElement(h,{buttonProps:Object.assign(Object.assign({size:"small"},y(o)),n),actionFn:v,close:j,prefixCls:w("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!=s?s:null==k?void 0:k.okText)))},R=e=>{const{prefixCls:t,placement:n,className:a,style:r}=e,i=G(e,["prefixCls","placement","className","style"]),{getPrefixCls:l}=d.useContext(p),s=l("popconfirm",t),[o]=M(s);return o(d.createElement(D,{placement:n,className:b(s,a),style:r,content:d.createElement(K,Object.assign({prefixCls:s},i))}))};var U=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const X=d.forwardRef(((e,t)=>{var n,a;const{prefixCls:r,placement:i="top",trigger:l="click",okType:s="primary",icon:o=d.createElement(f,null),children:c,overlayClassName:m,onOpenChange:x,onVisibleChange:u}=e,h=U(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:y}=d.useContext(p),[O,w]=g(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(a=e.defaultOpen)&&void 0!==a?a:e.defaultVisible}),k=(e,t)=>{w(e,!0),null==u||u(e),null==x||x(e,t)},P=y("popconfirm",r),I=b(P,m),[E]=M(P);return E(d.createElement(V,Object.assign({},j(h,["title"]),{trigger:l,placement:i,onOpenChange:t=>{const{disabled:n=!1}=e;n||k(t)},open:O,ref:t,overlayClassName:I,content:d.createElement(K,Object.assign({okType:s,icon:o},e,{prefixCls:P,close:e=>{k(!1,e)},onConfirm:t=>{var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(globalThis,t)},onCancel:t=>{var n;k(!1,t),null===(n=e.onCancel)||void 0===n||n.call(globalThis,t)}})),"data-popover-inject":!0}),v(c,{onKeyDown:e=>{var t,n;d.isValidElement(c)&&(null===(n=null==c?void 0:(t=c.props).onKeyDown)||void 0===n||n.call(t,e)),(e=>{e.keyCode===C.ESC&&O&&k(!1,e)})(e)}})))}));X._InternalPanelDoNotUseOrYouWillBeFired=R;const A=X,H=[{key:"1001",name:"张三",sex:"男",birth:"2002-05-06",education:"高中",hobby:"羽毛球、篮球、听歌、阅读",forbid:!1},{key:"1002",name:"李四",sex:"男",birth:"1998-09-21",education:"初中",hobby:"乒乓球、排球、游泳",forbid:!0},{key:"1003",name:"王五",sex:"男",birth:"1993-06-06",education:"本科",hobby:"旱冰、滑雪、跳高、打游戏",forbid:!1},{key:"1004",name:"辛八",sex:"男",birth:"1995-08-03",education:"大专",hobby:"网球、篮球、跳伞",forbid:!0},{key:"1005",name:"刘二",sex:"女",birth:"1999-11-05",education:"本科",hobby:"滑翔、游泳、篮球、看电影",forbid:!0},{key:"1006",name:"赵七",sex:"男",birth:"2000-07-18",education:"大专",hobby:"游泳、篮球、潜水",forbid:!1},{key:"1007",name:"杨一",sex:"女",birth:"1998-12-25",education:"高中",hobby:"冲浪、上网、看书、打游戏",forbid:!1}],q={key:{title:"数字输入框",type:"number"},name:{title:"输入框",type:"text"},sex:{title:"单选框",type:"radio"},birth:{title:"日期选择框",type:"date"},education:{title:"选择器",type:"select"},hobby:{title:"多选框",type:"checkbox"},forbid:{title:"开关",type:"switch"},action:{title:"按钮",type:"button"}},L=e=>{var t=e,{editing:n,dataIndex:l,title:c,cellType:d,record:p,index:m,children:x}=t,b=((e,t)=>{var n={};for(var l in e)r.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&a)for(var l of a(e))t.indexOf(l)<0&&i.call(e,l)&&(n[l]=e[l]);return n})(t,["editing","dataIndex","title","cellType","record","index","children"]);const u=((e,t)=>{switch(e){case"number":return w.jsx(_,{min:1e3,max:2e3});case"text":return w.jsx(E,{});case"radio":return w.jsx(W.Group,{options:["男","女"].map((e=>({value:e,label:e})))});case"date":return w.jsx("div",{children:w.jsx(S,{defaultValue:F(t.birth,"YYYY-MM-DD"),format:"YYYY-MM-DD"})});case"select":return w.jsx(B,{options:["初中","高中","大专","本科"].map((e=>({value:e}))),style:{width:"80px"}});case"checkbox":return w.jsx(I.Group,{options:t.hobby.split("、"),defaultValue:t.hobby.split("、")});case"switch":return w.jsx(Y,{defaultChecked:t.forbid})}})(d,p);return w.jsx("td",o(s({},b),{children:n?w.jsx(O.Item,{name:l,style:{margin:0},children:u}):x}))},J=()=>{const[e]=O.useForm(),[t,n]=d.useState(H),[a,r]=d.useState(""),i=e=>e.key===a,l=()=>{r("")},c=a=>{return i=void 0,l=null,o=function*(){try{const i=yield e.validateFields(),l=[...t],o=l.findIndex((e=>a===e.key));if(o>-1){const e=l[o];l.splice(o,1,s(s({},e),i)),n(l),r("")}else l.push(i),n(l),r("")}catch(i){}},new Promise(((e,t)=>{var n=e=>{try{r(o.next(e))}catch(n){t(n)}},a=e=>{try{r(o.throw(e))}catch(n){t(n)}},r=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,a);r((o=o.apply(i,l)).next())}));var i,l,o},p=[{title:()=>w.jsxs(w.Fragment,{children:[w.jsx("span",{children:"编号"}),w.jsx("p",{className:"sub-title",children:"(数字输入框)"})]}),dataIndex:"key",width:70,editable:!0,align:"center"},{title:()=>w.jsxs(w.Fragment,{children:[w.jsx("span",{children:"姓名"}),w.jsx("p",{className:"sub-title",children:"(输入框)"})]}),dataIndex:"name",width:110,editable:!0,align:"center"},{title:()=>w.jsxs(w.Fragment,{children:[w.jsx("span",{children:"性别"}),w.jsx("p",{className:"sub-title",children:"(单选框)"})]}),dataIndex:"sex",width:120,editable:!0,align:"center"},{title:()=>w.jsxs(w.Fragment,{children:[w.jsx("span",{children:"生日"}),w.jsx("p",{className:"sub-title",children:"(日期选择器)"})]}),dataIndex:"birth",width:140,editable:!0,align:"center"},{title:()=>w.jsxs(w.Fragment,{children:[w.jsx("span",{children:"学历"}),w.jsx("p",{className:"sub-title",children:"(选择器)"})]}),dataIndex:"education",width:80,editable:!0,align:"center"},{title:()=>w.jsxs(w.Fragment,{children:[w.jsx("span",{children:"爱好"}),w.jsx("p",{className:"sub-title",children:"(多选框)"})]}),dataIndex:"hobby",width:250,editable:!0,align:"center"},{title:()=>w.jsxs(w.Fragment,{children:[w.jsx("span",{children:"禁止编辑"}),w.jsx("p",{className:"sub-title",children:"(开关)"})]}),dataIndex:"forbid",width:70,editable:!0,align:"center",render:(e,t)=>w.jsx("span",{children:t.forbid?"是":"否"})},{title:()=>w.jsxs(w.Fragment,{children:[w.jsx("span",{children:"操作"}),w.jsx("p",{className:"sub-title",children:"(按钮)"})]}),dataIndex:"action",width:70,align:"center",render:(t,n)=>i(n)?w.jsxs(P,{children:[w.jsx(u,{type:"primary",ghost:!0,onClick:()=>c(n.key),children:"保存"}),w.jsx(A,{title:"是否取消编辑？",onConfirm:l,children:w.jsx(u,{type:"primary",danger:!0,ghost:!0,children:"取消"})})]}):w.jsx(u,{disabled:""!==a,onClick:()=>(t=>{e.setFieldsValue(s({},t)),r(t.key)})(n),children:"编辑"})}].map((e=>e.editable?o(s({},e),{onCell:t=>({record:t,cellType:q[e.dataIndex].type,dataIndex:e.dataIndex,title:e.title,editing:i(t)})}):e));return w.jsx(N,{plugin:T,children:w.jsx(k,{bordered:!1,children:w.jsx(O,{form:e,component:!1,children:w.jsx($,{components:{body:{cell:L}},dataSource:t,columns:p,pagination:!1})})})})};export{J as default};
