var G=Object.defineProperty,q=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var _=(e,t,s)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,v=(e,t)=>{for(var s in t||(t={}))$.call(t,s)&&_(e,s,t[s]);if(O)for(var s of O(t))F.call(t,s)&&_(e,s,t[s]);return e},I=(e,t)=>q(e,U(t));var D=(e,t)=>{var s={};for(var a in e)$.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&O)for(var a of O(e))t.indexOf(a)<0&&F.call(e,a)&&(s[a]=e[a]);return s};var V=(e,t,s)=>new Promise((a,l)=>{var b=i=>{try{c(s.next(i))}catch(d){l(d)}},u=i=>{try{c(s.throw(i))}catch(d){l(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(b,u);c((s=s.apply(e,t)).next())});import{m as J,r,s as S,u as Q,e as Z,d as T,B as k,aE as ee,N as z,h as te,o as ne,au as ae,K as se,x as N,j as n,y as le,f as oe,I as re}from"./index-6bdb1630.js";import{P as ie,d as ce}from"./websiteSetting-c0cc6e1c.js";import{D as de,d as me}from"./index-b12fc644.js";import{C as pe}from"./index-00fc890e.js";import{T as ue}from"./Table-26ede40f.js";import{g as B,a as xe,P as be}from"./index-0ffbcbd7.js";import{A as fe}from"./ActionButton-4a774106.js";import{S as he}from"./index-d0af43ca.js";import{S as ye}from"./index-3ee077bf.js";import{R as ge}from"./index-e7da05d0.js";import{I as je}from"./index-289eadd1.js";import"./pickAttrs-710cf873.js";import"./List-7d7884b5.js";import"./DownOutlined-34f111d1.js";import"./iconUtil-9e12b95f.js";import"./objectDestructuringEmpty-24e23e90.js";import"./useForceUpdate-97716f3b.js";import"./index-835b6309.js";import"./CheckOutlined-c662cd2b.js";const Ce=e=>{const{componentCls:t,iconCls:s,antCls:a,zIndexPopup:l,colorText:b,colorWarning:u,marginXXS:c,marginXS:i,fontSize:d,fontWeightStrong:h,colorTextHeading:o}=e;return{[t]:{zIndex:l,[`&${a}-popover`]:{fontSize:d},[`${t}-message`]:{marginBottom:i,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${s}`]:{color:u,fontSize:d,lineHeight:1,marginInlineEnd:i},[`${t}-title`]:{fontWeight:h,color:o,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:c,color:b}},[`${t}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:i}}}}},R=J("Popconfirm",e=>Ce(e),e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}},{resetStyle:!1});var ve=globalThis&&globalThis.__rest||function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(s[a[l]]=e[a[l]]);return s};const Y=e=>{const{prefixCls:t,okButtonProps:s,cancelButtonProps:a,title:l,description:b,cancelText:u,okText:c,okType:i="primary",icon:d=r.createElement(z,null),showCancel:h=!0,close:o,onConfirm:m,onCancel:f,onPopupClick:j}=e,{getPrefixCls:y}=r.useContext(S),[g]=Q("Popconfirm",Z.Popconfirm),C=B(l),P=B(b);return r.createElement("div",{className:`${t}-inner-content`,onClick:j},r.createElement("div",{className:`${t}-message`},d&&r.createElement("span",{className:`${t}-message-icon`},d),r.createElement("div",{className:`${t}-message-text`},C&&r.createElement("div",{className:T(`${t}-title`)},C),P&&r.createElement("div",{className:`${t}-description`},P))),r.createElement("div",{className:`${t}-buttons`},h&&r.createElement(k,Object.assign({onClick:f,size:"small"},a),u!=null?u:g==null?void 0:g.cancelText),r.createElement(fe,{buttonProps:Object.assign(Object.assign({size:"small"},ee(i)),s),actionFn:m,close:o,prefixCls:y("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},c!=null?c:g==null?void 0:g.okText)))},Pe=e=>{const{prefixCls:t,placement:s,className:a,style:l}=e,b=ve(e,["prefixCls","placement","className","style"]),{getPrefixCls:u}=r.useContext(S),c=u("popconfirm",t),[i]=R(c);return i(r.createElement(xe,{placement:s,className:T(c,a),style:l,content:r.createElement(Y,Object.assign({prefixCls:c},b))}))},Oe=Pe;var ke=globalThis&&globalThis.__rest||function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(s[a[l]]=e[a[l]]);return s};const K=r.forwardRef((e,t)=>{var s,a;const{prefixCls:l,placement:b="top",trigger:u="click",okType:c="primary",icon:i=r.createElement(z,null),children:d,overlayClassName:h,onOpenChange:o,onVisibleChange:m}=e,f=ke(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:j}=r.useContext(S),[y,g]=te(!1,{value:(s=e.open)!==null&&s!==void 0?s:e.visible,defaultValue:(a=e.defaultOpen)!==null&&a!==void 0?a:e.defaultVisible}),C=(p,x)=>{g(p,!0),m==null||m(p),o==null||o(p,x)},P=p=>{C(!1,p)},M=p=>{var x;return(x=e.onConfirm)===null||x===void 0?void 0:x.call(globalThis,p)},W=p=>{var x;C(!1,p),(x=e.onCancel)===null||x===void 0||x.call(globalThis,p)},L=p=>{p.keyCode===se.ESC&&y&&C(!1,p)},A=p=>{const{disabled:x=!1}=e;x||C(p)},w=j("popconfirm",l),H=T(w,h),[X]=R(w);return X(r.createElement(be,Object.assign({},ne(f,["title"]),{trigger:u,placement:b,onOpenChange:A,open:y,ref:t,overlayClassName:H,content:r.createElement(Y,Object.assign({okType:c,icon:i},e,{prefixCls:w,close:P,onConfirm:M,onCancel:W})),"data-popover-inject":!0}),ae(d,{onKeyDown:p=>{var x,E;r.isValidElement(d)&&((E=d==null?void 0:(x=d.props).onKeyDown)===null||E===void 0||E.call(x,p)),L(p)}})))});K._InternalPanelDoNotUseOrYouWillBeFired=Oe;const we=K,Ee=[{key:"1001",name:"张三",sex:"男",birth:"2002-05-06",education:"高中",hobby:"羽毛球、篮球、听歌、阅读",forbid:!1},{key:"1002",name:"李四",sex:"男",birth:"1998-09-21",education:"初中",hobby:"乒乓球、排球、游泳",forbid:!0},{key:"1003",name:"王五",sex:"男",birth:"1993-06-06",education:"本科",hobby:"旱冰、滑雪、跳高、打游戏",forbid:!1},{key:"1004",name:"辛八",sex:"男",birth:"1995-08-03",education:"大专",hobby:"网球、篮球、跳伞",forbid:!0},{key:"1005",name:"刘二",sex:"女",birth:"1999-11-05",education:"本科",hobby:"滑翔、游泳、篮球、看电影",forbid:!0},{key:"1006",name:"赵七",sex:"男",birth:"2000-07-18",education:"大专",hobby:"游泳、篮球、潜水",forbid:!1},{key:"1007",name:"杨一",sex:"女",birth:"1998-12-25",education:"高中",hobby:"冲浪、上网、看书、打游戏",forbid:!1}],Ie={key:{title:"数字输入框",type:"number"},name:{title:"输入框",type:"text"},sex:{title:"单选框",type:"radio"},birth:{title:"日期选择框",type:"date"},education:{title:"选择器",type:"select"},hobby:{title:"多选框",type:"checkbox"},forbid:{title:"开关",type:"switch"},action:{title:"按钮",type:"button"}},Ne=(e,t)=>{switch(e){case"number":return n.jsx(je,{min:1e3,max:2e3});case"text":return n.jsx(re,{});case"radio":return n.jsx(ge.Group,{options:["男","女"].map(s=>({value:s,label:s}))});case"date":return n.jsx("div",{children:n.jsx(de,{defaultValue:me(t.birth,"YYYY-MM-DD"),format:"YYYY-MM-DD"})});case"select":return n.jsx(ye,{options:["初中","高中","大专","本科"].map(s=>({value:s})),style:{width:"80px"}});case"checkbox":return n.jsx(oe.Group,{options:t.hobby.split("、"),defaultValue:t.hobby.split("、")});case"switch":return n.jsx(he,{defaultChecked:t.forbid})}},Se=i=>{var d=i,{editing:e,dataIndex:t,title:s,cellType:a,record:l,index:b,children:u}=d,c=D(d,["editing","dataIndex","title","cellType","record","index","children"]);const h=Ne(a,l);return n.jsx("td",I(v({},c),{children:e?n.jsx(N.Item,{name:t,style:{margin:0},children:h}):u}))},Je=()=>{const[e]=N.useForm(),[t,s]=r.useState(Ee),[a,l]=r.useState(""),b=o=>o.key===a,u=o=>{e.setFieldsValue(v({},o)),l(o.key)},c=()=>{l("")},i=o=>V(void 0,null,function*(){try{const m=yield e.validateFields(),f=[...t],j=f.findIndex(y=>o===y.key);if(j>-1){const y=f[j];f.splice(j,1,v(v({},y),m)),s(f),l("")}else f.push(m),s(f),l("")}catch(m){console.log("Validate Failed:",m)}}),h=[{title:()=>n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"编号"}),n.jsx("p",{className:"sub-title",children:"(数字输入框)"})]}),dataIndex:"key",width:70,editable:!0,align:"center"},{title:()=>n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"姓名"}),n.jsx("p",{className:"sub-title",children:"(输入框)"})]}),dataIndex:"name",width:110,editable:!0,align:"center"},{title:()=>n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"性别"}),n.jsx("p",{className:"sub-title",children:"(单选框)"})]}),dataIndex:"sex",width:120,editable:!0,align:"center"},{title:()=>n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"生日"}),n.jsx("p",{className:"sub-title",children:"(日期选择器)"})]}),dataIndex:"birth",width:140,editable:!0,align:"center"},{title:()=>n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"学历"}),n.jsx("p",{className:"sub-title",children:"(选择器)"})]}),dataIndex:"education",width:80,editable:!0,align:"center"},{title:()=>n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"爱好"}),n.jsx("p",{className:"sub-title",children:"(多选框)"})]}),dataIndex:"hobby",width:250,editable:!0,align:"center"},{title:()=>n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"禁止编辑"}),n.jsx("p",{className:"sub-title",children:"(开关)"})]}),dataIndex:"forbid",width:70,editable:!0,align:"center",render:(o,m)=>n.jsx("span",{children:m.forbid?"是":"否"})},{title:()=>n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"操作"}),n.jsx("p",{className:"sub-title",children:"(按钮)"})]}),dataIndex:"action",width:70,align:"center",render:(o,m)=>b(m)?n.jsxs(le,{children:[n.jsx(k,{type:"primary",ghost:!0,onClick:()=>i(m.key),children:"保存"}),n.jsx(we,{title:"是否取消编辑？",onConfirm:c,children:n.jsx(k,{type:"primary",danger:!0,ghost:!0,children:"取消"})})]}):n.jsx(k,{disabled:a!=="",onClick:()=>u(m),children:"编辑"})}].map(o=>o.editable?I(v({},o),{onCell:m=>({record:m,cellType:Ie[o.dataIndex].type,dataIndex:o.dataIndex,title:o.title,editing:b(m)})}):o);return n.jsx(ie,{plugin:ce,children:n.jsx(pe,{bordered:!1,children:n.jsx(N,{form:e,component:!1,children:n.jsx(ue,{components:{body:{cell:Se}},dataSource:t,columns:h,pagination:!1})})})})};export{Je as default};
