var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&l(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&l(e,n,t[n]);return e},o=(e,r)=>t(e,n(r));import{n as c,r as d,v as p,u as m,f as x,e as u,B as b,aH as h,T as y,i as f,o as j,ax as g,K as v,y as C,j as O,a as w,E as k,h as P,I}from"./index-26bed70f.js";import{P as E,d as N}from"./websiteSetting-27a29c49.js";import{D as T,d as S}from"./index-ff2bd992.js";import{T as F}from"./Table-b06adf33.js";import{g as $,a as D,P as z}from"./index-54da8cbf.js";import{A as V}from"./ActionButton-a05b5fae.js";import{S as Y}from"./index-d346be7a.js";import{S as B}from"./index-78472baf.js";import{R as W}from"./index-c077d20b.js";import{I as A}from"./index-a57acf76.js";import"./pickAttrs-24beb854.js";import"./List-d3c60dea.js";import"./DownOutlined-5baf3412.js";import"./iconUtil-c0a7c8f9.js";import"./objectDestructuringEmpty-47c1eead.js";import"./useForceUpdate-b1443a11.js";import"./index-db25a9ac.js";import"./CheckOutlined-8ab985aa.js";const _=c("Popconfirm",(e=>(e=>{const{componentCls:t,iconCls:n,antCls:r,zIndexPopup:i,colorText:a,colorWarning:l,marginXXS:s,marginXS:o,fontSize:c,fontWeightStrong:d,colorTextHeading:p}=e;return{[t]:{zIndex:i,[`&${r}-popover`]:{fontSize:c},[`${t}-message`]:{marginBottom:o,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${n}`]:{color:l,fontSize:c,lineHeight:1,marginInlineEnd:o},[`${t}-title`]:{fontWeight:d,color:p,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:s,color:a}},[`${t}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:o}}}}})(e)),(e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}}),{resetStyle:!1});var K=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const M=e=>{const{prefixCls:t,okButtonProps:n,cancelButtonProps:r,title:i,description:a,cancelText:l,okText:s,okType:o="primary",icon:c=d.createElement(y,null),showCancel:f=!0,close:j,onConfirm:g,onCancel:v,onPopupClick:C}=e,{getPrefixCls:O}=d.useContext(p),[w]=m("Popconfirm",x.Popconfirm),k=$(i),P=$(a);return d.createElement("div",{className:`${t}-inner-content`,onClick:C},d.createElement("div",{className:`${t}-message`},c&&d.createElement("span",{className:`${t}-message-icon`},c),d.createElement("div",{className:`${t}-message-text`},k&&d.createElement("div",{className:u(`${t}-title`)},k),P&&d.createElement("div",{className:`${t}-description`},P))),d.createElement("div",{className:`${t}-buttons`},f&&d.createElement(b,Object.assign({onClick:v,size:"small"},r),null!=l?l:null==w?void 0:w.cancelText),d.createElement(V,{buttonProps:Object.assign(Object.assign({size:"small"},h(o)),n),actionFn:g,close:j,prefixCls:O("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!=s?s:null==w?void 0:w.okText)))},G=e=>{const{prefixCls:t,placement:n,className:r,style:i}=e,a=K(e,["prefixCls","placement","className","style"]),{getPrefixCls:l}=d.useContext(p),s=l("popconfirm",t),[o]=_(s);return o(d.createElement(D,{placement:n,className:u(s,r),style:i,content:d.createElement(M,Object.assign({prefixCls:s},a))}))};var H=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const R=d.forwardRef(((e,t)=>{var n,r;const{prefixCls:i,placement:a="top",trigger:l="click",okType:s="primary",icon:o=d.createElement(y,null),children:c,overlayClassName:m,onOpenChange:x,onVisibleChange:b}=e,h=H(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:C}=d.useContext(p),[O,w]=f(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(r=e.defaultOpen)&&void 0!==r?r:e.defaultVisible}),k=(e,t)=>{w(e,!0),null==b||b(e),null==x||x(e,t)},P=C("popconfirm",i),I=u(P,m),[E]=_(P);return E(d.createElement(z,Object.assign({},j(h,["title"]),{trigger:l,placement:a,onOpenChange:t=>{const{disabled:n=!1}=e;n||k(t)},open:O,ref:t,overlayClassName:I,content:d.createElement(M,Object.assign({okType:s,icon:o},e,{prefixCls:P,close:e=>{k(!1,e)},onConfirm:t=>{var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(globalThis,t)},onCancel:t=>{var n;k(!1,t),null===(n=e.onCancel)||void 0===n||n.call(globalThis,t)}})),"data-popover-inject":!0}),g(c,{onKeyDown:e=>{var t,n;d.isValidElement(c)&&(null===(n=null==c?void 0:(t=c.props).onKeyDown)||void 0===n||n.call(t,e)),(e=>{e.keyCode===v.ESC&&O&&k(!1,e)})(e)}})))}));R._InternalPanelDoNotUseOrYouWillBeFired=G;const U=R,X=[{key:"1001",name:"张三",sex:"男",birth:"2002-05-06",education:"高中",hobby:"羽毛球、篮球、听歌、阅读",forbid:!1},{key:"1002",name:"李四",sex:"男",birth:"1998-09-21",education:"初中",hobby:"乒乓球、排球、游泳",forbid:!0},{key:"1003",name:"王五",sex:"男",birth:"1993-06-06",education:"本科",hobby:"旱冰、滑雪、跳高、打游戏",forbid:!1},{key:"1004",name:"辛八",sex:"男",birth:"1995-08-03",education:"大专",hobby:"网球、篮球、跳伞",forbid:!0},{key:"1005",name:"刘二",sex:"女",birth:"1999-11-05",education:"本科",hobby:"滑翔、游泳、篮球、看电影",forbid:!0},{key:"1006",name:"赵七",sex:"男",birth:"2000-07-18",education:"大专",hobby:"游泳、篮球、潜水",forbid:!1},{key:"1007",name:"杨一",sex:"女",birth:"1998-12-25",education:"高中",hobby:"冲浪、上网、看书、打游戏",forbid:!1}],L={key:{title:"数字输入框",type:"number"},name:{title:"输入框",type:"text"},sex:{title:"单选框",type:"radio"},birth:{title:"日期选择框",type:"date"},education:{title:"选择器",type:"select"},hobby:{title:"多选框",type:"checkbox"},forbid:{title:"开关",type:"switch"},action:{title:"按钮",type:"button"}},q=e=>{var t=e,{editing:n,dataIndex:l,title:c,cellType:d,record:p,index:m,children:x}=t,u=((e,t)=>{var n={};for(var l in e)i.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&r)for(var l of r(e))t.indexOf(l)<0&&a.call(e,l)&&(n[l]=e[l]);return n})(t,["editing","dataIndex","title","cellType","record","index","children"]);const b=((e,t)=>{switch(e){case"number":return O.jsx(A,{min:1e3,max:2e3});case"text":return O.jsx(I,{});case"radio":return O.jsx(W.Group,{options:["男","女"].map((e=>({value:e,label:e})))});case"date":return O.jsx("div",{children:O.jsx(T,{defaultValue:S(t.birth,"YYYY-MM-DD"),format:"YYYY-MM-DD"})});case"select":return O.jsx(B,{options:["初中","高中","大专","本科"].map((e=>({value:e}))),style:{width:"80px"}});case"checkbox":return O.jsx(P.Group,{options:t.hobby.split("、"),defaultValue:t.hobby.split("、")});case"switch":return O.jsx(Y,{defaultChecked:t.forbid})}})(d,p);return O.jsx("td",o(s({},u),{children:n?O.jsx(C.Item,{name:l,style:{margin:0},children:b}):x}))},J=()=>{const[e]=C.useForm(),[t,n]=d.useState(X),[r,i]=d.useState(""),a=e=>e.key===r,l=()=>{i("")},c=r=>{return a=void 0,l=null,o=function*(){try{const a=yield e.validateFields(),l=[...t],o=l.findIndex((e=>r===e.key));if(o>-1){const e=l[o];l.splice(o,1,s(s({},e),a)),n(l),i("")}else l.push(a),n(l),i("")}catch(a){}},new Promise(((e,t)=>{var n=e=>{try{i(o.next(e))}catch(n){t(n)}},r=e=>{try{i(o.throw(e))}catch(n){t(n)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,r);i((o=o.apply(a,l)).next())}));var a,l,o},p=[{title:()=>O.jsxs(O.Fragment,{children:[O.jsx("span",{children:"编号"}),O.jsx("p",{className:"sub-title",children:"(数字输入框)"})]}),dataIndex:"key",width:70,editable:!0,align:"center"},{title:()=>O.jsxs(O.Fragment,{children:[O.jsx("span",{children:"姓名"}),O.jsx("p",{className:"sub-title",children:"(输入框)"})]}),dataIndex:"name",width:110,editable:!0,align:"center"},{title:()=>O.jsxs(O.Fragment,{children:[O.jsx("span",{children:"性别"}),O.jsx("p",{className:"sub-title",children:"(单选框)"})]}),dataIndex:"sex",width:120,editable:!0,align:"center"},{title:()=>O.jsxs(O.Fragment,{children:[O.jsx("span",{children:"生日"}),O.jsx("p",{className:"sub-title",children:"(日期选择器)"})]}),dataIndex:"birth",width:140,editable:!0,align:"center"},{title:()=>O.jsxs(O.Fragment,{children:[O.jsx("span",{children:"学历"}),O.jsx("p",{className:"sub-title",children:"(选择器)"})]}),dataIndex:"education",width:80,editable:!0,align:"center"},{title:()=>O.jsxs(O.Fragment,{children:[O.jsx("span",{children:"爱好"}),O.jsx("p",{className:"sub-title",children:"(多选框)"})]}),dataIndex:"hobby",width:250,editable:!0,align:"center"},{title:()=>O.jsxs(O.Fragment,{children:[O.jsx("span",{children:"禁止编辑"}),O.jsx("p",{className:"sub-title",children:"(开关)"})]}),dataIndex:"forbid",width:70,editable:!0,align:"center",render:(e,t)=>O.jsx("span",{children:t.forbid?"是":"否"})},{title:()=>O.jsxs(O.Fragment,{children:[O.jsx("span",{children:"操作"}),O.jsx("p",{className:"sub-title",children:"(按钮)"})]}),dataIndex:"action",width:70,align:"center",render:(t,n)=>a(n)?O.jsxs(k,{children:[O.jsx(b,{type:"primary",ghost:!0,onClick:()=>c(n.key),children:"保存"}),O.jsx(U,{title:"是否取消编辑？",onConfirm:l,children:O.jsx(b,{type:"primary",danger:!0,ghost:!0,children:"取消"})})]}):O.jsx(b,{disabled:""!==r,onClick:()=>(t=>{e.setFieldsValue(s({},t)),i(t.key)})(n),children:"编辑"})}].map((e=>e.editable?o(s({},e),{onCell:t=>({record:t,cellType:L[e.dataIndex].type,dataIndex:e.dataIndex,title:e.title,editing:a(t)})}):e));return O.jsx(E,{plugin:N,children:O.jsx(w,{bordered:!1,children:O.jsx(C,{form:e,component:!1,children:O.jsx(F,{components:{body:{cell:q}},dataSource:t,columns:p,pagination:!1})})})})};export{J as default};
